import"./bootstrap.BQTXHgio.js";import"./bootstrap.min.C_98nNL8.js";/* empty css             */import"./_commonjsHelpers.oaXnIxvN.js";var e;new class{constructor(){this.cart=this.loadCart(),this.shippingCost=0,this.init()}init(){this.bindEvents(),this.updateOrderSummary(),this.setupFormValidation()}bindEvents(){const e=document.getElementById("sameAsBinding"),t=document.getElementById("shippingAddress");e&&t&&e.addEventListener("change",(e=>{e.target.checked?(t.style.display="none",this.clearShippingFields()):(t.style.display="block",this.copyBillingToShipping())})),document.querySelectorAll('input[name="shipping"]').forEach((e=>{e.addEventListener("change",(e=>{this.updateShippingCost(e.target.value)}))})),document.querySelectorAll('input[name="payment"]').forEach((e=>{e.addEventListener("change",(e=>{this.togglePaymentFields(e.target.value)}))}));const n=document.getElementById("cardNumber");n&&n.addEventListener("input",(e=>{this.formatCardNumber(e)}));const r=document.getElementById("expiryDate");r&&r.addEventListener("input",(e=>{this.formatExpiryDate(e)}));const s=document.getElementById("cvv");s&&s.addEventListener("input",(e=>{this.formatCVV(e)}));const i=document.getElementById("checkoutForm");i&&i.addEventListener("submit",(e=>{this.handleFormSubmission(e)}))}updateShippingCost(e){this.shippingCost={standard:0,express:9.99,nextday:19.99}[e]||0,this.updateOrderSummary()}togglePaymentFields(e){const t=document.getElementById("cardDetails");t&&("card"===e?(t.style.display="block",this.setCardFieldsRequired(!0)):(t.style.display="none",this.setCardFieldsRequired(!1)))}setCardFieldsRequired(e){["cardNumber","expiryDate","cvv","cardName"].forEach((t=>{const n=document.getElementById(t);n&&(n.required=e)}))}formatCardNumber(e){var t;let n=e.target.value.replace(/\s/g,"").replace(/[^0-9]/gi,""),r=(null==(t=n.match(/.{1,4}/g))?void 0:t.join(" "))||n;r.length>19&&(r=r.substring(0,19)),e.target.value=r}formatExpiryDate(e){let t=e.target.value.replace(/\D/g,"");t.length>=2&&(t=t.substring(0,2)+"/"+t.substring(2,4)),e.target.value=t}formatCVV(e){let t=e.target.value.replace(/\D/g,"");t.length>4&&(t=t.substring(0,4)),e.target.value=t}copyBillingToShipping(){Object.entries({address1:"shippingAddress1",address2:"shippingAddress2",city:"shippingCity",postcode:"shippingPostcode",country:"shippingCountry"}).forEach((([e,t])=>{const n=document.getElementById(e),r=document.getElementById(t);n&&r&&(r.value=n.value)}))}clearShippingFields(){["shippingAddress1","shippingAddress2","shippingCity","shippingPostcode","shippingCountry"].forEach((e=>{const t=document.getElementById(e);t&&(t.value="")}))}updateOrderSummary(){let e=0;this.cart.forEach((t=>{const n=parseFloat(t.price.replace("£",""));e+=n*t.quantity}));const t=.2*(e-100+this.shippingCost),n=e+t-100+this.shippingCost;document.querySelectorAll(".shipping-cost").forEach((e=>{e.textContent=0===this.shippingCost?"Free":`£${this.shippingCost.toFixed(2)}`})),document.querySelectorAll(".subtotal").forEach((t=>{t.textContent=`£${e.toFixed(2)}`})),document.querySelectorAll(".tax").forEach((e=>{e.textContent=`£${t.toFixed(2)}`})),document.querySelectorAll(".total").forEach((e=>{e.textContent=`£${n.toFixed(2)}`}));const r=document.querySelector(".place-order-btn");r&&(r.innerHTML=`\n                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                    <path d="M12 2L3 7V12C3 16.55 6.84 20.74 9.91 21.74C11.39 22.24 12.61 22.24 14.09 21.74C17.16 20.74 21 16.55 21 12V7L12 2Z" stroke="currentColor" stroke-width="2"/>\n                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n                </svg>\n                Place Order - £${n.toFixed(2)}\n            `)}setupFormValidation(){const e=document.getElementById("cardNumber");e&&e.addEventListener("blur",(e=>{const t=e.target.value.replace(/\s/g,"");t.length<13||t.length>19?e.target.setCustomValidity("Please enter a valid card number"):e.target.setCustomValidity("")}));const t=document.getElementById("expiryDate");t&&t.addEventListener("blur",(e=>{const t=e.target.value;if(/^(0[1-9]|1[0-2])\/\d{2}$/.test(t)){const[n,r]=t.split("/"),s=new Date,i=s.getFullYear()%100,o=s.getMonth()+1;parseInt(r)<i||parseInt(r)===i&&parseInt(n)<o?e.target.setCustomValidity("Card has expired"):e.target.setCustomValidity("")}else e.target.setCustomValidity("Please enter a valid expiry date (MM/YY)")}));const n=document.getElementById("cvv");n&&n.addEventListener("blur",(e=>{const t=e.target.value;t.length<3||t.length>4?e.target.setCustomValidity("Please enter a valid CVV"):e.target.setCustomValidity("")}))}handleFormSubmission(e){e.preventDefault();const t=e.target;if(t.checkValidity()){const e=t.querySelector(".place-order-btn");e.innerHTML,e.innerHTML='\n                <div class="spinner-border spinner-border-sm me-2" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                </div>\n                Processing...\n            ',e.disabled=!0,setTimeout((()=>{this.processOrder(t)}),2e3)}else{t.classList.add("was-validated");const e=t.querySelector(".form-control:invalid");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus())}}processOrder(e){const t=new FormData(e);t.get("firstName"),t.get("lastName"),t.get("email"),t.get("phone"),t.get("address1"),t.get("address2"),t.get("city"),t.get("postcode"),t.get("country"),t.get("sameAsBinding")||(t.get("shippingAddress1"),t.get("shippingAddress2"),t.get("shippingCity"),t.get("shippingPostcode"),t.get("shippingCountry")),t.get("shipping"),t.get("payment"),t.get("orderNotes"),this.cart,this.calculateTotal();localStorage.removeItem("mobileBoosterCart"),this.showSuccessMessage()}calculateTotal(){let e=0;this.cart.forEach((t=>{const n=parseFloat(t.price.replace("£",""));e+=n*t.quantity}));const t=.2*(e-100+this.shippingCost);return e+t-100+this.shippingCost}showSuccessMessage(){const e=document.createElement("div");e.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.8);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 9999;\n        ";const t=document.createElement("div");t.style.cssText="\n            background: white;\n            padding: 3rem;\n            border-radius: 1rem;\n            text-align: center;\n            max-width: 500px;\n            margin: 2rem;\n        ",t.innerHTML='\n            <div style="color: #00C73C; font-size: 4rem; margin-bottom: 1rem;">✓</div>\n            <h2 style="color: var(--color-dark-navy); margin-bottom: 1rem;">Order Placed Successfully!</h2>\n            <p style="color: var(--Blue-Gray-600); margin-bottom: 2rem;">\n                Thank you for your order. You will receive a confirmation email shortly.\n            </p>\n            <button onclick="window.location.href=\'/\'" style="\n                background: var(--primary-color);\n                color: white;\n                border: none;\n                padding: 1rem 2rem;\n                border-radius: 0.5rem;\n                font-weight: 600;\n                cursor: pointer;\n            ">Continue Shopping</button>\n        ',e.appendChild(t),document.body.appendChild(e)}loadCart(){const e=localStorage.getItem("mobileBoosterCart");return e?JSON.parse(e):[{id:"1",name:"Professional Signal Booster Pro",price:"£299.99",quantity:1},{id:"2",name:"Home Signal Booster Essential",price:"£199.99",quantity:2},{id:"3",name:"Signal Booster Accessories Kit",price:"£49.99",quantity:1}]}},e=document.querySelectorAll(".needs-validation"),Array.prototype.slice.call(e).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}));const t=document.querySelector(".subscribe-form");t&&t.addEventListener("submit",(e=>{e.preventDefault(),e.currentTarget.checkValidity()&&e.currentTarget.classList.add("subscribed")}));
//# sourceMappingURL=checkout.bundle.js.map
