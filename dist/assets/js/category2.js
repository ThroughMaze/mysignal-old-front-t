import"./bootstrap.min.js";(function(){var c=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(c).forEach(function(e){e.addEventListener("submit",function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})})();const h=document.querySelector(".newsletter-form");h&&h.addEventListener("submit",c=>{if(c.preventDefault(),c.currentTarget.checkValidity()){c.currentTarget.closest(".newsletter-container");const e=document.createElement("div");e.className="alert alert-success text-center",e.innerHTML=`
                <i class="fas fa-check-circle fs-1 text-success mb-3"></i>
                <h4>Thank You!</h4>
                <p>You've been successfully subscribed to our newsletter.</p>
            `,c.currentTarget.style.display="none",c.currentTarget.insertAdjacentElement("afterend",e)}else c.currentTarget.classList.add("was-validated")});document.querySelector(".subscribe-form").addEventListener("submit",c=>{c.preventDefault(),c.currentTarget.checkValidity()&&c.currentTarget.classList.add("subscribed")});document.addEventListener("DOMContentLoaded",()=>{const c=document.querySelector('[data-bs-toggle="collapse"]'),e=document.querySelector(".fullscreen-nav");c.addEventListener("click",()=>{c.classList.toggle("active"),e.classList.toggle("active")})});function S(c){c.currentTarget.classList.toggle("active")}document.querySelectorAll(".navbar-list > li").forEach(c=>{c.addEventListener("click",S)});document.querySelectorAll(".country-item").forEach(c=>{c.addEventListener("click",e=>{e.currentTarget.querySelector("input[type=radio]").checked?document.querySelector("#openPopup img").src=e.currentTarget.querySelector("img").src:document.querySelector("#openPopup img").src="https://flagcdn.com/gb.svg"})});const p=document.getElementById("back-to-top");p&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?p.classList.add("show"):p.classList.remove("show")}),p.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));function q(){const c=document.querySelectorAll(".range-slider input"),e=document.querySelectorAll(".price-inputs input");document.querySelector(".range-slider .progress");let t=100;c.length&&(e.forEach(r=>{r.addEventListener("input",n=>{let s=parseInt(e[0].value),i=parseInt(e[1].value);i-s>=t&&i<=c[1].max&&(n.target.className==="input-min"?c[0].value=s:c[1].value=i)})}),c.forEach(r=>{r.addEventListener("input",n=>{let s=parseInt(c[0].value),i=parseInt(c[1].value);i-s<t?n.target.className==="min-price"?c[0].value=i-t:c[1].value=s+t:(e[0].value=s,e[1].value=i)})}))}q();class E{constructor(){this.filters={coverage:[],signal:[],carrier:[],rating:[],price:[]},this.sortBy="featured",this.currentPage=1,this.itemsPerPage=6,this.totalItems=24,this.init()}init(){this.bindEvents(),this.initPagination(),this.updateResultsCount(),this.setupQuickView(),this.setupWishlist(),this.setupCompare(),this.setupAddToCart()}bindEvents(){document.querySelectorAll('input[type="checkbox"]').forEach(s=>{s.addEventListener("change",i=>{this.handleFilterChange(i),this.updateActiveFilters()})});const e=document.getElementById("apply-filters");e&&e.addEventListener("click",()=>{this.applyFilters()});const t=document.getElementById("clear-filters");t&&t.addEventListener("click",()=>{this.clearFilters()});const r=document.getElementById("sort-select");r&&r.addEventListener("change",s=>{this.sortBy=s.target.value,this.applySort()});const n=document.getElementById("per-page");n&&n.addEventListener("change",s=>{this.itemsPerPage=parseInt(s.target.value),this.currentPage=1,this.applyFilters()})}handleFilterChange(e){const t=e.target.name,r=e.target.value;e.target.checked?this.filters[t].includes(r)||this.filters[t].push(r):this.filters[t]=this.filters[t].filter(n=>n!==r)}updateActiveFilters(){const e=document.getElementById("active-filters");if(!e)return;e.innerHTML="";let t=!1;Object.entries(this.filters).forEach(([r,n])=>{n.forEach(s=>{t=!0;const i=document.createElement("div");i.className="filter-tag";let a=s.charAt(0).toUpperCase()+s.slice(1);r==="coverage"&&(s==="small"&&(a="Small Space"),s==="medium"&&(a="Medium Space"),s==="large"&&(a="Large Space")),r==="signal"&&(s==="3g"&&(a="3G Network"),s==="4g"&&(a="4G LTE"),s==="5g"&&(a="5G Ready"),s==="all"&&(a="Multi-Band")),r==="carrier"&&s==="all"&&(a="All Carriers"),r==="rating"&&(s==="5"&&(a="5 Stars"),s==="4"&&(a="4+ Stars"),s==="3"&&(a="3+ Stars")),i.innerHTML=`
                    ${a}
                    <button data-type="${r}" data-value="${s}">
                        <i class="fas fa-times"></i>
                    </button>
                `,i.querySelector("button").addEventListener("click",l=>{const u=l.currentTarget.dataset.type,o=l.currentTarget.dataset.value,d=document.querySelector(`input[name="${u}"][value="${o}"]`);d&&(d.checked=!1),this.filters[u]=this.filters[u].filter(m=>m!==o),this.updateActiveFilters(),this.applyFilters()}),e.appendChild(i)})}),e.style.display=t?"flex":"none"}applyFilters(){this.showLoadingState(),setTimeout(()=>{this.filterProducts(),this.hideLoadingState(),this.updateResultsCount(),this.initPagination()},500)}clearFilters(){this.filters={coverage:[],signal:[],carrier:[],rating:[],price:[]},document.querySelectorAll('input[type="checkbox"]').forEach(i=>{i.checked=!1});const e=document.getElementById("sort-select");e&&(e.value="featured",this.sortBy="featured");const t=document.querySelector(".input-min"),r=document.querySelector(".input-max"),n=document.querySelector(".min-price"),s=document.querySelector(".max-price");t&&r&&n&&s&&(t.value=0,r.value=1e3,n.value=0,s.value=1e3),this.updateActiveFilters(),this.applyFilters()}filterProducts(){const e=document.querySelectorAll(".product-card");let t=0;e.forEach(r=>{this.shouldShowProduct(r)?(r.closest(".col-md-6").style.display="block",t++):r.closest(".col-md-6").style.display="none"}),this.totalItems=t,t===0?this.showEmptyState():this.hideEmptyState()}shouldShowProduct(e){return Object.values(this.filters).some(r=>r.length>0)?Math.random()>.3:!0}applySort(){const e=document.querySelector(".products-grid .row"),t=Array.from(e.children);t.sort((r,n)=>{switch(this.sortBy){case"price-low":return this.getPrice(r)-this.getPrice(n);case"price-high":return this.getPrice(n)-this.getPrice(r);case"newest":return-1;case"rating":return this.getRating(n)-this.getRating(r);case"featured":default:return 0}}),t.forEach(r=>e.appendChild(r))}getPrice(e){const t=e.querySelector(".current-price");return t?parseFloat(t.textContent.replace("£","")):0}getRating(e){const t=e.querySelector(".product-rating span");return t?parseFloat(t.textContent.replace(/[()]/g,"")):0}showLoadingState(){document.querySelectorAll(".product-card").forEach(t=>{t.style.opacity="0.5",t.style.pointerEvents="none"})}hideLoadingState(){document.querySelectorAll(".product-card").forEach(t=>{t.style.opacity="1",t.style.pointerEvents="auto"})}showEmptyState(){const e=document.querySelector(".products-grid .row");if(!document.querySelector(".empty-state")){const t=document.createElement("div");t.className="empty-state text-center py-5",t.innerHTML=`
                <i class="fas fa-search fa-3x text-muted mb-3"></i>
                <h3>No products found</h3>
                <p>Try adjusting your filters or search criteria to find what you're looking for.</p>
                <button class="btn-primary px-4 py-2" onclick="categoryManager.clearFilters()">
                    <i class="fas fa-undo-alt me-2"></i>Clear All Filters
                </button>
            `,e.appendChild(t)}}hideEmptyState(){const e=document.querySelector(".empty-state");e&&e.remove()}updateResultsCount(){const e=document.getElementById("results-count");e&&(e.textContent=this.totalItems)}initPagination(){const e=document.querySelector(".pagination");if(!e)return;const t=Math.ceil(this.totalItems/this.itemsPerPage),r=document.querySelector(".pagination-info p");if(r){const i=(this.currentPage-1)*this.itemsPerPage+1,a=Math.min(i+this.itemsPerPage-1,this.totalItems);r.innerHTML=`Showing <span>${i}-${a}</span> of <span>${this.totalItems}</span> products`}const n=e.querySelector(".prev"),s=e.querySelector(".next");n&&(n.disabled=this.currentPage===1),s&&(s.disabled=this.currentPage===t),document.querySelectorAll(".page-btn:not(.prev):not(.next)").forEach(i=>{i.addEventListener("click",()=>{i.classList.contains("active")||(document.querySelectorAll(".page-btn").forEach(a=>a.classList.remove("active")),i.classList.add("active"),this.currentPage=parseInt(i.textContent),this.applyFilters(),document.querySelector(".products-header").scrollIntoView({behavior:"smooth"}))})}),n&&n.addEventListener("click",()=>{this.currentPage>1&&(this.currentPage--,this.applyFilters(),document.querySelectorAll(".page-btn:not(.prev):not(.next)").forEach(i=>{parseInt(i.textContent)===this.currentPage?i.classList.add("active"):i.classList.remove("active")}))}),s&&s.addEventListener("click",()=>{this.currentPage<t&&(this.currentPage++,this.applyFilters(),document.querySelectorAll(".page-btn:not(.prev):not(.next)").forEach(i=>{parseInt(i.textContent)===this.currentPage?i.classList.add("active"):i.classList.remove("active")}))})}setupQuickView(){document.querySelectorAll(".quickview-btn").forEach(e=>{e.addEventListener("click",t=>{var d;t.preventDefault();const r=t.currentTarget.closest(".product-card"),n=r.querySelector(".product-title").textContent,s=r.querySelector(".current-price").textContent,i=((d=r.querySelector(".original-price"))==null?void 0:d.textContent)||"",a=r.querySelector(".product-description").textContent,l=r.querySelector(".product-image img").src,u=r.querySelector(".product-rating").innerHTML,o=document.getElementById("quickview-modal");if(o){if(o.querySelector(".product-title").textContent=n,o.querySelector(".product-rating").innerHTML=u,o.querySelector(".current-price").textContent=s,i){o.querySelector(".original-price").textContent=i,o.querySelector(".original-price").style.display="inline";const y=parseFloat(s.replace("£","")),f=parseFloat(i.replace("£","")),v=Math.round((f-y)/f*100);o.querySelector(".discount-badge").textContent=`-${v}%`,o.querySelector(".discount-badge").style.display="inline"}else o.querySelector(".original-price")&&(o.querySelector(".original-price").style.display="none"),o.querySelector(".discount-badge")&&(o.querySelector(".discount-badge").style.display="none");o.querySelector(".product-description").textContent=a,o.querySelector(".quickview-image img").src=l,new bootstrap.Modal(o).show()}})})}setupWishlist(){document.querySelectorAll(".wishlist-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=t.currentTarget.querySelector("i");r.classList.contains("far")?(r.classList.remove("far"),r.classList.add("fas"),r.style.color="#FF4444",this.showNotification("Product added to wishlist","success")):(r.classList.remove("fas"),r.classList.add("far"),r.style.color="",this.showNotification("Product removed from wishlist","info"))})})}setupCompare(){document.querySelectorAll(".compare-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=t.currentTarget.closest(".product-card").querySelector(".product-title").textContent;this.showNotification(`${n} added to compare list`,"success")})})}setupAddToCart(){document.querySelectorAll(".btn-cart, .btn-add-to-cart").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=t.currentTarget.closest(".product-card")||t.currentTarget.closest(".modal-content"),n=r.querySelector(".product-title").textContent;let s=1;const i=r.querySelector(".quantity-selector input");i&&(s=parseInt(i.value)),this.showNotification(`${s} × ${n} added to cart`,"success"),document.querySelectorAll(".cart-count").forEach(l=>{const u=parseInt(l.textContent);l.textContent=u+s,l.classList.add("pulse"),setTimeout(()=>{l.classList.remove("pulse")},500)})})})}showNotification(e,t="info"){const r=document.createElement("div");r.className=`notification notification-${t}`,r.innerHTML=`
            <div class="notification-content">
                <i class="fas ${t==="success"?"fa-check-circle":t==="error"?"fa-exclamation-circle":"fa-info-circle"}"></i>
                <span>${e}</span>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `,r.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${t==="success"?"#00C73C":t==="error"?"#FF4444":"#1434CB"};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 350px;
        `,r.querySelector(".notification-content").style.cssText=`
            display: flex;
            align-items: center;
            gap: 0.75rem;
        `,r.querySelector(".notification-close").style.cssText=`
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            margin-left: auto;
        `,document.body.appendChild(r),setTimeout(()=>{r.style.transform="translateX(0)"},100),r.querySelector(".notification-close").addEventListener("click",()=>{r.style.transform="translateX(100%)",setTimeout(()=>{r.remove()},300)}),setTimeout(()=>{r.style.transform="translateX(100%)",setTimeout(()=>{r.remove()},300)},5e3)}}const L=new E;window.categoryManager=L;document.addEventListener("shown.bs.modal",function(c){if(c.target.id==="quickview-modal"){const e=c.target.querySelector(".quantity-selector");if(e){const t=e.querySelector(".minus"),r=e.querySelector(".plus"),n=e.querySelector("input");t.addEventListener("click",()=>{let s=parseInt(n.value);s=Math.max(1,s-1),n.value=s}),r.addEventListener("click",()=>{let s=parseInt(n.value);s=Math.min(10,s+1),n.value=s}),n.addEventListener("change",()=>{let s=parseInt(n.value);isNaN(s)||s<1?s=1:s>10&&(s=10),n.value=s})}}});const g=document.createElement("style");g.textContent=`
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }
    
    .cart-count.pulse {
        animation: pulse 0.5s ease;
    }
`;document.head.appendChild(g);
